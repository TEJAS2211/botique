apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: dev

resources:
  - ../../base
  - ./ns.yaml
  - ./hpa.yaml
  - ./pdb.yaml

  # Frontend (simple routing only)
  - ./frontend-vs.yaml
  - ./frontend-canary-deploy.yaml

  # ðŸ”¥ SINGLE backend circuit breaker
  - ./dr-backend-cartservice.yaml


patches:
  - target:
      kind: Deployment
      name: loadgenerator
    path: ./istio-inject-remove.patch.yaml

  - path: ./ad-deploy.patch.yaml
  - path: ./frontend-deploy.patch.yaml
  - path: ./cart-deploy.patch.yaml
  - path: ./checkout-deploy.patch.yaml
  - path: ./productcatalog-deploy.patch.yaml
  - path: ./redis-cart-deploy.patch.yaml
  - path: ./currency-deploy.patch.yaml
  - path: ./shipping-deploy.patch.yaml
  - path: ./monitoring-patch.yaml
  - path: ./security-patch.yaml
  - path: ./config-patch.yaml
